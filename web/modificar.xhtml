<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:t="http://primefaces.org/ui"
          
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:body style="background-color:white">
        <title>Modificar perfil</title>
        <link href="css/bootstrap.min.css" rel="stylesheet"/>

        <div class="container" style="background-color: #e42d40">
            <ui:include src="/WEB-INF/header.xhtml" /> 
            <div class="row">   
                <div class="col-md-6" style="color:black;font-size:400%;">Modificar Perfil</div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <br />
                        <br />
                        <br />
                        <br />
                        <c:if test="#{usuarioBean.usuario.imagen == null or usuarioBean.usuario.imagen eq ''}">        
                            <img style="border-radius=8px;" src="perfil.jpeg" alt="Perfil"/>
                        </c:if>
                        <c:if test="#{!(usuarioBean.usuario.imagen == null and usuarioBean.usuario.imagen eq '')}">
                            <h1></h1>          
                            <img style="border-radius=8px;" src="./resources/imagenes/#{usuarioBean.usuario.imagen}" alt="Perfil" />
                        </c:if>
                        <br />
                        <br />
                        <br />                        
                        <h:form enctype="multipart/form-data">
                            <t:growl id="messages" showDetail="true" />
                            <t:fileUpload value="#{usuarioBean.imagen}" mode="simple"/>
                            <br/>
                            <br/>
                            <t:commandButton class="btn btn-default" value="Guardar Imagen" ajax="false" 
                                             actionListener="#{usuarioBean.guardaImagen()}"/>
                        </h:form>
                        <br/>
                        <br/>
                        <h:form>
                            <h:commandButton value="Eliminar perfil" class="btn btn-danger btn-primary btn-lg active" action="#{usuarioBean.eliminar()}" onclick="if (!confirm('¿Desea de verdad eliminar su perfil y sus servicios?')) {
                                        return false;
                                    }
                                    ;
                                    return true;
                                             "/>
                        </h:form>
                    </div>
                    <div class="col-md-6 col-md-offset-2">
                        <br />
                        <br />
                        <h:form>
                            <div class="form-group">
                                <label for="Descripción">Descripción</label>
                                <h:inputTextarea class="form-control" rows="3" p:placeholder="Descripción" value="#{usuarioBean.usuario.esAgente() ? usuarioBean.usuario.agente.ocupacion : usuarioBean.usuario.programador.formacion}"/>
                            </div>
                            <div class="form-group">
                                <label for="Nombre">Nombre</label>
                                <h:inputText class="form-control" id="nombre" p:placeholder="#{usuarioBean.usuario.nombre}" value="#{ usuarioBean.usuario.nombre}"/>
                            </div> 	
                            <div class="form-group">
                                <label for="ApellidoPaterno">Apellido Paterno</label>
                                <h:inputText class="form-control" id="apellidoPaterno" p:placeholder="#{usuarioBean.usuario.apellidoPaterno}" value="#{usuarioBean.usuario.apellidoPaterno}"/>
                            </div>   	
                            <div class="form-group">
                                <label for="ApellidoMaterno">Apellido Materno</label>
                                <h:inputText class="form-control" id="apellidoMaterno" p:placeholder="#{usuarioBean.usuario.apellidoMaterno}" value="#{usuarioBean.usuario.apellidoMaterno}"/>
                            </div> 

                            <div class="form-group">
                                <label for="Estado">Estado</label>
                                <h:inputText class="form-control" id="estado" p:placeholder="#{usuarioBean.usuario.estado}" value="#{usuarioBean.usuario.estado}"/>
                            </div>                            
                            <div class="form-group">
                                <label for="Correo">Correo</label>
                                <h:inputText class="form-control" id="correo" p:placeholder="#{usuarioBean.usuario.correo}" value="#{usuarioBean.usuario.correo}"/>
                            </div> 
                            <div>
                                <label for="Teléfono">Teléfono</label>
                                <h:inputText class="form-control" id="telefono" p:placeholder="#{usuarioBean.usuario.telefono}" value="#{usuarioBean.usuario.telefono}"/>
                            </div>
                            <br />
                            <br />
                            <h:commandButton value="Guardar" class="btn btn-default" action="#{usuarioBean.modificarPerfil()}"/>
                            <a href="perfil.xhtml" class="btn btn-default btn-lg active" role="button">Cancelar</a>
                        </h:form> 
                    </div>
                </div>
            </div>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"/>
            <script src="js/bootstrap.min.js"/>
            <script src="docs/assets/js/ie10-viewport-bug-workaround.js"/>
            <br/>
            <br/>
        </div>
    </h:body>      
</html>
