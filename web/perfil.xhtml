<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
   <h:head>
    <title>Mi perfil</title>
    <link href="css/bootstrap.min.css" rel="stylesheet"/>
  </h:head>
  <h:body style="background-color:#D3D3D3">
      <h:outputLabel value="No se ha iniciado sesión" rendered="#{usuarioBean.verificarSesion() eq false}"/>
    <br/>
    <br/> 
    <div class="row">
      <div class="col-md-3" style="color:black;font-size:400%;">El Prometeo</div>
      <div class="col-md-3">
        <a href="servicio.xhtml">Inicio y publicaciones</a>
      </div>
      <div class="col-md-3">          
	<form id="searchform">
	  <input type="text" placeholder="Buscar aqu&iacute;..."/>
	  <button type="submit">Buscar</button>
	</form>  
      </div>    
      <div class="col-md-3">       
       <h:form rendered="#{usuarioBean.verificarSesion()}">
                 <h:commandButton value="Cerrar Sesión" action="#{usuarioBean.cerrarSesion()}"/>                         
        </h:form> 
      </div>
    </div>
    <div class="container">
      <div class="row">
	<div class="col-md-4">
	<br/>
	<br/>
	<img style="border-radius=8px;" src="perfil.jpeg" alt="Perfil"/>
	<br/>
	<br/>
        <div style="resize=both; overflow=auto;">Nombre: <h:outputText value="#{usuarioBean.usuario.nombre}" /></div>
        <div style="resize=both; overflow=auto;">Apellido paterno: <h:outputText value="#{usuarioBean.usuario.apellidoPaterno}" /></div>
        <div style="resize=both; overflow=auto;">Apellido materno: <h:outputText value="#{usuarioBean.usuario.apellidoMaterno}" /></div>
        <div style="resize=both; overflow=auto;">Correo electrónico: <h:outputText value="#{usuarioBean.usuario.correo}" /></div>
        <div style="resize=both; overflow=auto;">Teléfono: <h:outputText value="#{usuarioBean.usuario.telefono}" /></div>
	<br/>
	<br/>
	<br/>
	<br/>
	 <h:form rendered="#{usuarioBean.verificarSesion()}">
             <h:commandButton value="Modificar perfil" class="btn btn-primary btn-lg active" action="#{usuarioBean.irModificar()}"/>                         
        </h:form>         
        </div>	
	<div class="col-md-4">
	<p style="color:black;font-size:400%;">Mi Perfil</p>
	<br/>
	<br/>
	<br/>
	<div style="resize=both; overflow=auto;">
            <h:outputText value="#{usuarioBean.usuario.esAgente() ? 
                                   (!usuarioBean.usuario.agente.tieneOcupacion()  ? 'Aquí se mostrará la información del agente creativo o programador. La información se va ajustando de acuerdo a la división definida de la pantalla' : usuarioBean.usuario.agente.ocupacion) 
                                   : !usuarioBean.usuario.programador.tieneFormacion() ? 'Aquí se mostrará la información del agente creativo o programador. La información se va ajustando de acuerdo a la división definida de la pantalla' : usuarioBean.usuario.programador.formacion}"/></div>
	<br/>
	<br/>
        <div style="resize=both; overflow=auto">Tipo de usuario: <h:outputText value="#{usuarioBean.usuario.esAgente() ? 'Agente Creativo' : 'Programador'}"/></div>
	</div>
	<div class="col-md-4" style="color:black;font-size:200%;">Servicios         
	  <div class="row">
	    <br/>
	    <div class="col-md-6">Hechos:</div>
            <ui:repeat value="#{servicioBean.servicios}" var="ser">                
                    <h:form rendered="#{(servicioBean.esElAgente(usuarioBean.usuario,ser) and ser.finalizado)}">
                        <div class="servicios">
                            <section>
                                <label> Titulo del servicio:</label>
                                    <p> <h:commandLink value="#{ser.titulo}" action="#{servicioBean.mostrar(ser.idServicio)}" > </h:commandLink> </p>
                                <label>Presupuesto:</label>
                        <p>$#{ser.presupuesto}</p>
                        <label>Descripción:</label>
                        <p>#{ser.description}</p>
                            <h:commandButton value="Eliminar post" class="btn btn-primary btn-lg active" action="#{servicioBean.eliminar(ser)}" rendered="false" />                         
                            <!--<h:commandButton value="Modificar post" class="btn btn-primary btn-lg active" action="{servicioBean.eliminar(ser)}"/> -->                         
                    </section>
                        </div>
                </h:form>
           </ui:repeat>
            <div class="col-md-offset-6">Haciendo: 
                <ui:repeat value="#{servicioBean.servicios}" var="ser">                
                    <h:form rendered="#{(servicioBean.esElAgente(usuarioBean.usuario,ser) and !ser.finalizado)}">
                        <div class="servicios">
                            <section>
                                <label> Titulo del servicio:</label>
                                    <p> <h:commandLink value="#{ser.titulo}" action="#{servicioBean.mostrar(ser.idServicio)}" > </h:commandLink> </p>
                                <label>Presupuesto:</label>
                        <p>$#{ser.presupuesto}</p>
                        <label>Descripción:</label>
                        <p>#{ser.description}</p>
                            <h:commandButton value="Eliminar post" class="btn btn-primary btn-lg active" action="#{servicioBean.eliminar(ser)}" rendered="#{servicioBean.esElAgente(usuarioBean.usuario,ser)}" />                         
                            <!--<h:commandButton value="Modificar post" class="btn btn-primary btn-lg active" action="{servicioBean.eliminar(ser)}"/> -->                         
                    </section>
                        </div>
                </h:form>
           </ui:repeat>
	      <br/>
	      <br/>
	      <br/>
	      <br/>
	      <br/>
	      <br/>
	      <br/>
	      <span class="glyphicon glyphicon-bell"/>
	    </div>
 	  </div>	
	</div>
      </div>
    </div>	
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"/>
    <script src="bootstrap.min.js"/>
    <script src="docs/assets/js/ie10-viewport-bug-workaround.js"/>
  </h:body>      
</html>
